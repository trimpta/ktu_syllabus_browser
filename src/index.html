<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Catalog</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
            color: #e0e6ed;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Header */
        .header {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .search-container {
            flex: 1;
            max-width: 400px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 0.75rem;
            color: #e0e6ed;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }

        .filter-toggle {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #3b82f6;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: none;
        }

        .filter-toggle:hover {
            background: rgba(59, 130, 246, 0.2);
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 2rem;
            padding: 2rem 0;
            min-height: calc(100vh - 100px);
        }

        /* Sidebar Filters */
        .filters-sidebar {
            background: rgba(15, 15, 35, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.1);
            border-radius: 1rem;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 120px;
            transition: transform 0.3s ease;
        }

        .filters-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #3b82f6;
        }

        .filter-group {
            margin-bottom: 2rem;
        }

        .filter-label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #cbd5e1;
        }

        .filter-select,
        .filter-input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 0.5rem;
            color: #e0e6ed;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus,
        .filter-input:focus {
            outline: none;
            border-color: #3b82f6;
        }

        /* Course Grid */
        .courses-section {
            min-height: 400px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .results-info {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .course-card {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.8), rgba(15, 15, 35, 0.8));
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .course-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .course-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.1);
        }

        .course-card:hover::before {
            transform: scaleX(1);
        }

        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .course-code {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .semester-badge {
            background: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .course-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #f1f5f9;
        }

        .course-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            color: #94a3b8;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .modules-preview {
            color: #6b7280;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .outcomes-preview {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .outcome-badge {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            padding: 0.2rem 0.5rem;
            border-radius: 0.4rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Course Detail Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(15, 15, 35, 0.95), rgba(31, 41, 55, 0.95));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 1rem;
            max-width: 800px;
            max-height: 90vh;
            width: 100%;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
            position: relative;
        }

        .modal-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 1.5rem;
            padding: 0.5rem;
            border-radius: 0.5rem;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: #e0e6ed;
        }

        .modal-body {
            padding: 2rem;
        }

        .detail-section {
            margin-bottom: 2rem;
        }

        .detail-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #3b82f6;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .module-item {
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid rgba(59, 130, 246, 0.1);
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .module-header {
            padding: 1rem 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .module-header:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .module-title {
            font-weight: 600;
            color: #f1f5f9;
        }

        .module-content {
            padding: 0 1.5rem 1.5rem;
            color: #cbd5e1;
            line-height: 1.7;
            display: none;
        }

        .module-content.expanded {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .outcome-list {
            display: grid;
            gap: 1rem;
        }

        .outcome-item {
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 0.75rem;
            padding: 1rem;
        }

        .outcome-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        }

        .outcome-code {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .knowledge-level {
            background: rgba(249, 115, 22, 0.1);
            color: #f97316;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .outcome-description {
            color: #cbd5e1;
            line-height: 1.6;
        }

        /* Loading and Error States */
        .loading-state,
        .error-state,
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            text-align: center;
            color: #6b7280;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(59, 130, 246, 0.3);
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        /* Animations */
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Mobile Responsiveness */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .filters-sidebar {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 200;
                transform: translateX(-100%);
                border-radius: 0;
                margin: 0;
                overflow-y: auto;
            }

            .filters-sidebar.mobile-open {
                transform: translateX(0);
            }

            .filter-toggle {
                display: block;
            }

            .courses-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .search-container {
                order: 2;
                max-width: none;
            }

            .modal-content {
                margin: 1rem;
                max-height: calc(100vh - 2rem);
            }

            .modal-header,
            .modal-body {
                padding: 1.5rem;
            }

            .courses-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 0.75rem;
            }

            .course-card {
                padding: 1rem;
            }

            .course-header {
                flex-direction: column;
                gap: 0.5rem;
                align-items: flex-start;
            }

            .course-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1 class="logo">Course Catalog</h1>
                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search courses...">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
                        <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" />
                    </svg>
                </div>
                <button class="filter-toggle" id="filterToggle">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M3 6h18M7 12h10M11 18h2" stroke="currentColor" stroke-width="2" />
                    </svg>
                    Filters
                </button>
            </div>
        </header>

        <main class="main-layout">
            <aside class="filters-sidebar" id="filtersSidebar">
                <h3 class="filters-title">Filters</h3>

                <div class="filter-group">
                    <label class="filter-label" for="semesterFilter">Semester</label>
                    <select class="filter-select" id="semesterFilter">
                        <option value="">All Semesters</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label" for="creditsFilter">Credits</label>
                    <select class="filter-select" id="creditsFilter">
                        <option value="">All Credits</option>
                    </select>
                </div>

                <div class="filter-group">
                    <button class="filter-select" id="clearFilters"
                        style="background: rgba(239, 68, 68, 0.1); color: #ef4444; cursor: pointer; border: 1px solid rgba(239, 68, 68, 0.3);">
                        Clear All Filters
                    </button>
                </div>
            </aside>

            <section class="courses-section">
                <div class="section-header">
                    <div class="results-info" id="resultsInfo">Loading courses...</div>
                </div>

                <div id="loadingState" class="loading-state">
                    <div class="loading-spinner"></div>
                    <p>Loading courses...</p>
                </div>

                <div id="errorState" class="error-state" style="display: none;">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none"
                        style="color: #ef4444; margin-bottom: 1rem;">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                        <path d="M15 9l-6 6M9 9l6 6" stroke="currentColor" stroke-width="2" />
                    </svg>
                    <h3>Error Loading Courses</h3>
                    <p>Using sample data instead.</p>
                </div>

                <div id="emptyState" class="empty-state" style="display: none;">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none"
                        style="color: #6b7280; margin-bottom: 1rem;">
                        <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
                        <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" />
                    </svg>
                    <h3>No Courses Found</h3>
                    <p>Try adjusting your search or filters.</p>
                </div>

                <div class="courses-grid" id="coursesGrid"></div>
            </section>
        </main>
    </div>

    <!-- Course Detail Modal -->
    <div class="modal-overlay" id="courseModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-header">
                <div class="course-header">
                    <span class="course-code" id="modalCourseCode"></span>
                    <span class="semester-badge" id="modalSemester"></span>
                </div>
                <h2 class="course-title" id="modalCourseTitle"></h2>
                <div class="course-meta">
                    <div class="meta-item">
                        <strong>Credits:</strong> <span id="modalCredits"></span>
                    </div>
                    <div class="meta-item">
                        <strong>CIE:</strong> <span id="modalCIE"></span>
                    </div>
                    <div class="meta-item">
                        <strong>ESE:</strong> <span id="modalESE"></span>
                    </div>
                </div>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Modal content will be populated here -->
            </div>
        </div>
    </div>

    <script>
        class CourseManager {
            constructor() {
                this.courses = [];
                this.filteredCourses = [];
                this.filters = {
                    search: '',
                    semester: '',
                    credits: ''
                };
                this.init();
            }

            async init() {
                await this.loadData();
                this.setupEventListeners();
                this.populateFilters();
                this.applyFilters();
            }

            async loadData() {
                try {
                    // Try to fetch from external source first
                    try {
                        const response = await fetch('/data.json');
                        if (response.ok) {
                            const data = await response.json();
                            this.courses = data.courses || [];
                            this.hideLoading();
                            return;
                        }
                    } catch (fetchError) {
                        console.log('External data not available, using sample data');
                    }

                    // Use sample data based on the provided JSON structure
                    this.courses = [
                        {
                            "course_code": "PCCST301",
                            "semester": "S3",
                            "title": "THEORY OF COMPUTATION",
                            "cie_marks": 40,
                            "ese_marks": 60,
                            "credits": 4,
                            "modules": [
                                {
                                    "module_number": 1,
                                    "content": [
                                        "Formal definition of a finite automaton, Deterministic Finite Automata (DFA), Regular languages, Nondeterminism (guess and verify paradigm)",
                                        "Formal definition of a nondeterministic finite automaton, NFA with epsilon transitions",
                                        "Eliminating epsilon transitions (Proof not expected), Equivalence of NFAs and DFAs (Proof not expected)",
                                        "DFA State Minimization, Applications of finite automata - text search, keyword recognition"
                                    ]
                                },
                                {
                                    "module_number": 2,
                                    "content": [
                                        "The formal definition of a regular expression, Building Regular Expressions",
                                        "Equivalence with finite automata - Converting FA to Regular Expressions, Converting Regular Expressions to FA",
                                        "Pattern Matching and Regular Expressions, Regular grammar, Equivalence with FA",
                                        "Properties of Regular Languages, Closure and Decision Properties of Regular Languages",
                                        "The Pumping Lemma for Regular Languages (with formal proof)"
                                    ]
                                },
                                {
                                    "module_number": 3,
                                    "content": [
                                        "Formal definition of a context-free grammar, Designing context-free grammars",
                                        "Leftmost and Rightmost Derivations Using a Grammar, Parse Trees",
                                        "Ambiguous Grammars, Resolving ambiguity, Inherent ambiguity",
                                        "Formal definition of a pushdown automaton, DPDA and NPDA",
                                        "Equivalence NPDAs and CFGs - conversions in both directions"
                                    ]
                                },
                                {
                                    "module_number": 4,
                                    "content": [
                                        "Elimination of useless symbols and productions, Eliminating epsilon productions",
                                        "Eliminating unit productions, Chomsky normal form, Greibach normal form",
                                        "The Pumping Lemma for Context-Free Languages (with formal proof)",
                                        "Closure and Decision Properties of Context-Free Languages",
                                        "The formal definition of a Turing machine, Examples of Turing machines"
                                    ]
                                },
                                {
                                    "module_number": 5,
                                    "content": [
                                        "Church Turing thesis, Encoding of TMs, Universal Machine and Diagonalization",
                                        "Reductions, Decidable and Undecidable Problems",
                                        "Halting problem, Post Correspondence Problem",
                                        "Proofs for undecidability of various problems"
                                    ]
                                }
                            ],
                            "course_outcomes": [
                                {
                                    "code": "CO1",
                                    "description": "Understand formal languages and their classification in Chomsky hierarchy",
                                    "knowledge_level": "K2"
                                },
                                {
                                    "code": "CO2",
                                    "description": "Design finite automata and regular expressions for pattern matching",
                                    "knowledge_level": "K3"
                                },
                                {
                                    "code": "CO3",
                                    "description": "Construct context-free grammars and pushdown automata for context-free languages",
                                    "knowledge_level": "K3"
                                },
                                {
                                    "code": "CO4",
                                    "description": "Analyze computability and decidability using Turing machines",
                                    "knowledge_level": "K4"
                                }
                            ],
                            "textbooks": [
                                {
                                    "title": "Introduction to Automata Theory, Languages, and Computation",
                                    "author": "John E. Hopcroft, Rajeev Motwani, Jeffrey D. Ullman",
                                    "publisher": "Pearson",
                                    "edition": "3rd Edition"
                                }
                            ],
                            "reference_books": [
                                {
                                    "title": "An Introduction to Formal Languages and Automata",
                                    "author": "Peter Linz",
                                    "publisher": "Jones & Bartlett Learning",
                                    "edition": "6th Edition"
                                }
                            ],
                            "video_links": []
                        },
                        {
                            "course_code": "PCCST303",
                            "semester": "S3",
                            "title": "DATA STRUCTURES",
                            "cie_marks": 40,
                            "ese_marks": 60,
                            "credits": 4,
                            "modules": [
                                {
                                    "module_number": 1,
                                    "content": [
                                        "Sparse matrix (Tuple representation); Stacks and Queues",
                                        "Multi-Stacks, Queues, Circular Queues, Double Ended Queues",
                                        "Evaluation of Expressions- Infix to Postfix, Evaluating Postfix Expressions",
                                        "Singly Linked List - Operations on Linked List"
                                    ]
                                },
                                {
                                    "module_number": 2,
                                    "content": [
                                        "Stacks and Queues using Linked List, Polynomial representation using Linked List",
                                        "Doubly Linked List; Circular Linked List",
                                        "Memory allocation - First-fit, Best-fit, and Worst-fit allocation schemes",
                                        "Garbage collection and compaction"
                                    ]
                                },
                                {
                                    "module_number": 3,
                                    "content": [
                                        "Trees - Representation Of Trees; Binary Trees - Types and Properties",
                                        "Binary Tree Representation, Tree Operations, Tree Traversals",
                                        "Expression Trees; Binary Search Trees - Binary Search Tree Operations",
                                        "Binary Heaps - Binary Heap Operations, Priority Queue"
                                    ]
                                },
                                {
                                    "module_number": 4,
                                    "content": [
                                        "Graphs - Definitions; Representation of Graphs",
                                        "Depth First Search and Breadth First Search",
                                        "Applications of Graphs - Single Source All Destination",
                                        "Shortest path algorithms"
                                    ]
                                },
                                {
                                    "module_number": 5,
                                    "content": [
                                        "Sorting Techniques - Selection Sort, Insertion Sort, Quick Sort, Merge Sort",
                                        "Heap Sort, Radix Sort",
                                        "Searching Techniques - Linear Search, Binary Search",
                                        "Hashing - Hashing functions, Collision Resolution techniques"
                                    ]
                                }
                            ],
                            "course_outcomes": [
                                {
                                    "code": "CO1",
                                    "description": "Identify appropriate data structures for solving real world problems",
                                    "knowledge_level": "K3"
                                },
                                {
                                    "code": "CO2",
                                    "description": "Implement linear data structures such as arrays, linked lists, stacks, and queues",
                                    "knowledge_level": "K3"
                                },
                                {
                                    "code": "CO3",
                                    "description": "Design and implement non-linear data structures such as trees and graphs",
                                    "knowledge_level": "K3"
                                },
                                {
                                    "code": "CO4",
                                    "description": "Apply appropriate searching and sorting algorithms for different scenarios",
                                    "knowledge_level": "K3"
                                }
                            ],
                            "textbooks": [
                                {
                                    "title": "Data Structures and Algorithm Analysis in C++",
                                    "author": "Mark Allen Weiss",
                                    "publisher": "Pearson",
                                    "edition": "4th Edition"
                                }
                            ],
                            "reference_books": [
                                {
                                    "title": "Introduction to Algorithms",
                                    "author": "Thomas H. Cormen, Charles E. Leiserson",
                                    "publisher": "MIT Press",
                                    "edition": "3rd Edition"
                                }
                            ],
                            "video_links": []
                        },
                        {
                            "course_code": "PCCST302",
                            "semester": "S3",
                            "title": "COMPUTER ORGANIZATION AND ARCHITECTURE",
                            "cie_marks": 40,
                            "ese_marks": 60,
                            "credits": 3,
                            "modules": [
                                {
                                    "module_number": 1,
                                    "content": [
                                        "Basic Computer Organization and Design",
                                        "Instruction Codes, Computer Registers, Computer Instructions",
                                        "Timing and Control, Instruction Cycle, Memory Reference Instructions",
                                        "Input-Output and Interrupt, Complete Computer Description"
                                    ]
                                },
                                {
                                    "module_number": 2,
                                    "content": [
                                        "Central Processing Unit - Introduction, General Register Organization",
                                        "Stack Organization, Instruction Formats, Addressing Modes",
                                        "Data Transfer and Manipulation, Program Control",
                                        "Reduced Instruction Set Computer (RISC)"
                                    ]
                                },
                                {
                                    "module_number": 3,
                                    "content": [
                                        "Pipeline and Vector Processing - Parallel Processing",
                                        "Pipelining, Arithmetic Pipeline, Instruction Pipeline",
                                        "RISC Pipeline, Vector Processing, Array Processors"
                                    ]
                                },
                                {
                                    "module_number": 4,
                                    "content": [
                                        "Computer Arithmetic - Introduction, Addition and Subtraction",
                                        "Multiplication Algorithms, Division Algorithms",
                                        "Floating Point Arithmetic Operations",
                                        "Decimal Arithmetic Unit"
                                    ]
                                },
                                {
                                    "module_number": 5,
                                    "content": [
                                        "Memory Organization - Memory Hierarchy",
                                        "Main Memory, Auxiliary Memory, Associative Memory",
                                        "Cache Memory, Virtual Memory",
                                        "Memory Management Hardware"
                                    ]
                                }
                            ],
                            "course_outcomes": [
                                {
                                    "code": "CO1",
                                    "description": "Understand the basic organization and design of digital computers",
                                    "knowledge_level": "K2"
                                },
                                {
                                    "code": "CO2",
                                    "description": "Analyze CPU organization, instruction formats and addressing modes",
                                    "knowledge_level": "K4"
                                },
                                {
                                    "code": "CO3",
                                    "description": "Evaluate pipeline and vector processing techniques",
                                    "knowledge_level": "K5"
                                },
                                {
                                    "code": "CO4",
                                    "description": "Design arithmetic units for various computer operations",
                                    "knowledge_level": "K3"
                                }
                            ],
                            "textbooks": [
                                {
                                    "title": "Computer System Architecture",
                                    "author": "M. Morris Mano",
                                    "publisher": "Pearson Education",
                                    "edition": "3rd Edition"
                                }
                            ],
                            "reference_books": [
                                {
                                    "title": "Computer Organization and Design",
                                    "author": "David A. Patterson, John L. Hennessy",
                                    "publisher": "Morgan Kaufmann",
                                    "edition": "5th Edition"
                                }
                            ],
                            "video_links": []
                        }
                    ];

                    this.hideLoading();
                } catch (error) {
                    console.error('Error loading data:', error);
                    this.showError();
                }
            }

            hideLoading() {
                document.getElementById('loadingState').style.display = 'none';
            }

            showError() {
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('errorState').style.display = 'flex';
                // Still load sample data even on error
                setTimeout(() => {
                    document.getElementById('errorState').style.display = 'none';
                    this.populateFilters();
                    this.applyFilters();
                }, 2000);
            }

            setupEventListeners() {
                // Search
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    this.filters.search = e.target.value.toLowerCase();
                    this.applyFilters();
                });

                // Filter selects
                ['semester', 'credits'].forEach(filter => {
                    document.getElementById(`${filter}Filter`).addEventListener('change', (e) => {
                        this.filters[filter] = e.target.value;
                        this.applyFilters();
                    });
                });

                // Clear filters
                document.getElementById('clearFilters').addEventListener('click', () => {
                    this.clearAllFilters();
                });

                // Mobile filter toggle
                document.getElementById('filterToggle').addEventListener('click', () => {
                    const sidebar = document.getElementById('filtersSidebar');
                    sidebar.classList.toggle('mobile-open');
                });

                // Close mobile filters when clicking outside
                document.addEventListener('click', (e) => {
                    const sidebar = document.getElementById('filtersSidebar');
                    const toggle = document.getElementById('filterToggle');
                    if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
                        sidebar.classList.remove('mobile-open');
                    }
                });

                // Modal close
                document.getElementById('modalClose').addEventListener('click', () => {
                    this.closeModal();
                });

                document.getElementById('courseModal').addEventListener('click', (e) => {
                    if (e.target.id === 'courseModal') {
                        this.closeModal();
                    }
                });

                // Escape key to close modal
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeModal();
                    }
                });
            }

            populateFilters() {
                const semesters = [...new Set(this.courses.map(c => c.semester).filter(Boolean))].sort();
                const credits = [...new Set(this.courses.map(c => c.credits).filter(Boolean))].sort((a, b) => a - b);

                this.populateSelect('semesterFilter', semesters);
                this.populateSelect('creditsFilter', credits);
            }

            populateSelect(selectId, options) {
                const select = document.getElementById(selectId);
                const currentValue = select.value;

                // Clear existing options except the first one
                while (select.children.length > 1) {
                    select.removeChild(select.lastChild);
                }

                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.textContent = option;
                    select.appendChild(optionElement);
                });

                select.value = currentValue;
            }

            applyFilters() {
                this.filteredCourses = this.courses.filter(course => {
                    // Search filter
                    if (this.filters.search) {
                        const searchTerm = this.filters.search;
                        const searchableText = [
                            course.title || '',
                            course.course_code || '',
                            course.semester || '',
                            ...(course.modules || []).flatMap(m => m.content || []),
                            ...(course.course_outcomes || []).map(co => co.description || '')
                        ].join(' ').toLowerCase();

                        if (!searchableText.includes(searchTerm)) return false;
                    }

                    // Semester filter
                    if (this.filters.semester && course.semester !== this.filters.semester) return false;

                    // Credits filter
                    if (this.filters.credits && course.credits != this.filters.credits) return false;

                    return true;
                });

                this.renderCourses();
                this.updateResultsInfo();
            }

            renderCourses() {
                const grid = document.getElementById('coursesGrid');
                const emptyState = document.getElementById('emptyState');

                if (this.filteredCourses.length === 0) {
                    grid.style.display = 'none';
                    emptyState.style.display = 'flex';
                    return;
                }

                grid.style.display = 'grid';
                emptyState.style.display = 'none';

                grid.innerHTML = this.filteredCourses.map(course => this.createCourseCard(course)).join('');

                // Add click listeners to course cards
                grid.querySelectorAll('.course-card').forEach((card, index) => {
                    card.addEventListener('click', () => {
                        this.showCourseDetail(this.filteredCourses[index]);
                    });
                });
            }

            createCourseCard(course) {
                const modules = course.modules || [];
                const outcomes = course.course_outcomes || [];

                return `
                    <div class="course-card" data-course-id="${course.course_code || 'N/A'}">
                        <div class="course-header">
                            <span class="course-code">${course.course_code || 'N/A'}</span>
                            <span class="semester-badge">${course.semester || 'N/A'}</span>
                        </div>
                        <h3 class="course-title">${course.title || 'Untitled Course'}</h3>
                        <div class="course-meta">
                            <div class="meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                ${course.credits || 0} Credits
                            </div>
                            <div class="meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 11H7v8h2v-8zM13 7h-2v12h2V7zM17 3h-2v16h2V3z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                CIE: ${course.cie_marks || 0} | ESE: ${course.ese_marks || 0}
                            </div>
                        </div>
                        <div class="modules-preview">
                            ${modules.length} Module${modules.length !== 1 ? 's' : ''} • 
                            ${outcomes.length} Learning Outcome${outcomes.length !== 1 ? 's' : ''}
                        </div>
                        <div class="outcomes-preview">
                            ${outcomes.slice(0, 3).map(outcome =>
                    `<span class="outcome-badge">${outcome.knowledge_level || 'N/A'}</span>`
                ).join('')}
                            ${outcomes.length > 3 ? `<span class="outcome-badge">+${outcomes.length - 3} more</span>` : ''}
                        </div>
                    </div>
                `;
            }

            showCourseDetail(course) {
                const modal = document.getElementById('courseModal');

                // Populate modal header
                document.getElementById('modalCourseCode').textContent = course.course_code || 'N/A';
                document.getElementById('modalSemester').textContent = course.semester || 'N/A';
                document.getElementById('modalCourseTitle').textContent = course.title || 'Untitled Course';
                document.getElementById('modalCredits').textContent = course.credits || 0;
                document.getElementById('modalCIE').textContent = course.cie_marks || 0;
                document.getElementById('modalESE').textContent = course.ese_marks || 0;

                // Populate modal body
                const modalBody = document.getElementById('modalBody');
                modalBody.innerHTML = this.createModalContent(course);

                // Add module toggle functionality
                modalBody.querySelectorAll('.module-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const content = header.nextElementSibling;
                        const toggle = header.querySelector('.module-toggle');
                        const isExpanded = content.classList.contains('expanded');

                        if (isExpanded) {
                            content.classList.remove('expanded');
                            toggle.textContent = '+';
                        } else {
                            content.classList.add('expanded');
                            toggle.textContent = '−';
                        }
                    });
                });

                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            createModalContent(course) {
                const modules = course.modules || [];
                const outcomes = course.course_outcomes || [];
                const textbooks = course.textbooks || [];
                const referenceBooks = course.reference_books || [];
                const videoLinks = course.video_links || [];

                return `
                    ${modules.length > 0 ? `
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" stroke="currentColor" stroke-width="2"/>
                                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Course Modules
                            </h3>
                            ${modules.map(module => `
                                <div class="module-item">
                                    <div class="module-header">
                                        <span class="module-title">Module ${module.module_number}</span>
                                        <span class="module-toggle">+</span>
                                    </div>
                                    <div class="module-content">
                                        ${(module.content || []).map(content => `<p>• ${content}</p>`).join('')}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}

                    ${outcomes.length > 0 ? `
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Course Outcomes
                            </h3>
                            <div class="outcome-list">
                                ${outcomes.map(outcome => `
                                    <div class="outcome-item">
                                        <div class="outcome-header">
                                            <span class="outcome-code">${outcome.code || 'N/A'}</span>
                                            <span class="knowledge-level">${outcome.knowledge_level || 'N/A'}</span>
                                        </div>
                                        <div class="outcome-description">
                                            ${outcome.description || 'No description available'}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}

                    ${textbooks.length > 0 ? `
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" stroke="currentColor" stroke-width="2"/>
                                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Textbooks
                            </h3>
                            <div style="display: grid; gap: 1rem;">
                                ${textbooks.map(book => `
                                    <div style="background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(59, 130, 246, 0.1); border-radius: 0.75rem; padding: 1rem;">
                                        <strong>${book.title || 'N/A'}</strong><br>
                                        <span style="color: #94a3b8;">by ${book.author || 'N/A'} (${book.publisher || 'N/A'}, ${book.edition || 'N/A'})</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}

                    ${referenceBooks.length > 0 ? `
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2"/>
                                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Reference Books
                            </h3>
                            <div style="display: grid; gap: 1rem;">
                                ${referenceBooks.map(book => `
                                    <div style="background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(59, 130, 246, 0.1); border-radius: 0.75rem; padding: 1rem;">
                                        <strong>${book.title || 'N/A'}</strong><br>
                                        <span style="color: #94a3b8;">by ${book.author || 'N/A'} (${book.publisher || 'N/A'}, ${book.edition || 'N/A'})</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}

                    ${videoLinks.length > 0 ? `
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <polygon points="5,3 19,12 5,21" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Video Links
                            </h3>
                            <div style="display: grid; gap: 0.5rem;">
                                ${videoLinks.map(link => `
                                    <a href="${link.url || '#'}" target="_blank" rel="noopener noreferrer" 
                                       style="color: #3b82f6; text-decoration: none; padding: 0.5rem; background: rgba(59, 130, 246, 0.1); border-radius: 0.5rem; transition: background-color 0.3s ease;"
                                       onmouseover="this.style.backgroundColor='rgba(59, 130, 246, 0.2)'"
                                       onmouseout="this.style.backgroundColor='rgba(59, 130, 246, 0.1)'">
                                        ${link.title || link.url || 'Video Link'}
                                    </a>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                `;
            }

            closeModal() {
                document.getElementById('courseModal').classList.remove('active');
                document.body.style.overflow = '';
            }

            updateResultsInfo() {
                const info = document.getElementById('resultsInfo');
                const total = this.courses.length;
                const filtered = this.filteredCourses.length;

                if (total === 0) {
                    info.textContent = 'No courses available';
                } else if (filtered === total) {
                    info.textContent = `Showing all ${total} course${total !== 1 ? 's' : ''}`;
                } else {
                    info.textContent = `Showing ${filtered} of ${total} course${total !== 1 ? 's' : ''}`;
                }
            }

            clearAllFilters() {
                // Reset filter object
                this.filters = {
                    search: '',
                    semester: '',
                    credits: ''
                };

                // Reset form elements
                document.getElementById('searchInput').value = '';
                document.getElementById('semesterFilter').value = '';
                document.getElementById('creditsFilter').value = '';

                this.applyFilters();
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            new CourseManager();
        });
    </script>
</body>

</html>